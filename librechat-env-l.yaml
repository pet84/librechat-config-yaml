version: 1.2.8
cache: true
interface:
  agents: true
  presets: false
  runCode: false
  customWelcome: "V√≠tej, {{user.name}} üëã Jsem Airis ‚ö°"
  termsOfService:
    modalContent: |
      # Podm√≠nky slu≈æby
      ## √övod
      V√≠tejte v AIRIS ArchEnergy Chat!  
      Pou≈æ√≠v√°n√≠m t√©to slu≈æby souhlas√≠te s n√°sleduj√≠c√≠mi pravidly:
      - Slu≈æba je poskytov√°na ‚Äûtak jak je".
      - AIRIS ArchEnergy nenese odpovƒõdnost za rozhodnut√≠ uƒçinƒõn√° na z√°kladƒõ v√Ωstup≈Ø AI.
      - U≈æivatel souhlas√≠, ≈æe AI m≈Ø≈æe dƒõlat chyby.
      ## Z√°vƒõr
      Pokud nesouhlas√≠te s tƒõmito podm√≠nkami, slu≈æbu nepou≈æ√≠vejte.
  privacyPolicy:
    modalContent: |
      # Z√°sady ochrany osobn√≠ch √∫daj≈Ø
      ## Ochrana dat
      Va≈°e soukrom√≠ je pro n√°s d≈Øle≈æit√©.  
      Data konverzac√≠ nejsou sd√≠lena s t≈ôet√≠mi stranami mimo poskytovatele AI API.
      - Osobn√≠ √∫daje uchov√°v√°me jen v nezbytn√©m rozsahu.
      - U≈æivatel m≈Ø≈æe kdykoliv po≈æ√°dat o smaz√°n√≠ √∫ƒçtu.
      ## Kontakt
      V p≈ô√≠padƒõ dotaz≈Ø n√°s kontaktujte na [archenergy.cz](https://archenergy.cz).
registration:
  socialLogins:
    - "google"
   
endpoints:
  custom:
    - name: "Perplexity"
      apiKey: "${PERPLEXITY_API_KEY}"
      baseURL: "https://api.perplexity.ai/"
      models:
        default:
          - "sonar-deep-research"
          - "sonar-reasoning-pro"
          - "sonar-reasoning"
          - "sonar-pro"
          - "sonar"
        fetch: false
      titleConvo: true
      titleModel: "current_model"
      summarize: true
      summaryModel: "current_model"
      forcePrompt: false
      dropParams:
        - "stop"
        - "frequency_penalty"
        - "presence_penalty"
        - "user"
      modelDisplayLabel: "Perplexity"
    - name: "Mistral"
      apiKey: "${MISTRAL_API_KEY}"
      baseURL: "https://api.mistral.ai/v1"
      models:
        default:
          - "mistral-small-latest"
          - "mistral-tiny-latest"
          - "mistral-large-latest"
          - "mistral-medium-latest"
        fetch: false
      titleConvo: true
      titleModel: "mistral-tiny"
      modelDisplayLabel: "Mistral"
      dropParams: ["stop", "user", "frequency_penalty", "presence_penalty"]
      
    # xAI - Konfigurace bez streamov√°n√≠ (k z√°≈ô√≠ 2025)
    # https://x.ai/api
    - name: "xai"
      apiKey: "${XAI_API_KEY}"
      baseURL: "https://api.x.ai/v1"
      models:
        default:
        - grok-4-fast-reasoning
        - grok-4-fast-non-reasoning
        - grok-4
        - grok-3
        - grok-3-mini
      fetch: true  # Automaticky naƒçte dostupn√© modely
      titleConvo: true
      titleMethod: "completion"
      titleModel: "grok-3-mini"
      summarize: false
      summaryModel: "grok-3-mini"
      forcePrompt: false
      modelDisplayLabel: "Grok (xAI)"
      stream: false  # Explicitnƒõ vypnout streamov√°n√≠
      
    # OpenRouter Example
    - name: 'OpenRouter'
      # For `apiKey` and `baseURL`, you can use environment variables that you define.
      # recommended environment variables:
      apiKey: '${OPENROUTER_KEY}'
      baseURL: 'https://openrouter.ai/api/v1'
      headers:
          x-librechat-body-parentmessageid: '{{LIBRECHAT_BODY_PARENTMESSAGEID}}'
      models:
        default: ['meta-llama/llama-3-70b-instruct']
        fetch: true
      titleConvo: true
      titleModel: 'meta-llama/llama-3-70b-instruct'
      # Recommended: Drop the stop parameter from the request as Openrouter models use a variety of stop tokens.
      dropParams: ['stop']
      modelDisplayLabel: 'OpenRouter'
    # Dify endpoint (NOV√ù!)
    - name: 'Specialista-Airis'
      apiKey: '${DIFY_API_KEY}'
      baseURL: 'https://dify-peach.vercel.app/v1'
      models:
        default: ['Specialista-Airis']
      titleConvo: true
      modelDisplayLabel: 'Specialista-Airis'




  
mcpServers:
#  podio:
#    command: npx
#    args:
#      - -y
#      - supergateway
#      - --sse
#      - https://mcp.pipedream.net/df5adf48-d9d4-4566-8e88-e78882be0e11/podio

#  microsoft_teams:
#    command: npx
#    args:
#      - -y
#      - supergateway
#      - --sse
#      - https://mcp.pipedream.net/df5adf48-d9d4-4566-8e88-e78882be0e11/microsoft_teams

  google_calendar:
    initTimeout: 150000
    command: npx
    args:
      - -y
      - supergateway
      - --sse
      - https://mcp.pipedream.net/df5adf48-d9d4-4566-8e88-e78882be0e11/google_calendar
    chatMenu: false 

#  google_sheets:
#    command: npx
#   args:
#      - -y
#      - supergateway
#      - --sse
#      - https://mcp.pipedream.net/df5adf48-d9d4-4566-8e88-e78882be0e11/google_sheets

#  google_docs:
#    command: npx
#    args:
#      - -y
#      - supergateway
#      - --sse
#      - https://mcp.pipedream.net/df5adf48-d9d4-4566-8e88-e78882be0e11/google_docs
      
  Bible:
    initTimeout: 150000
    command: npx
    args:
      - -y
      - supergateway
      - --sse
      - https://mcp.pipedream.net/df5adf48-d9d4-4566-8e88-e78882be0e11/api_bible
    chatMenu: false

    
#    fnefunguje :(    
#    mcp_make:
#      command: npx
#     args:
#       - -y
#       - mcp-remote
#       - "https://eu1.make.com/mcp/api/v1/u/#kliƒç#/sse"
  

#  google_forms:
#    command: npx
#    args:
#      - -y
#      - supergateway
#      - --sse
#      - https://mcp.pipedream.net/df5adf48-d9d4-4566-8e88-e78882be0e11/google_forms
#  Funguje
#   microsoft_onedrive:
#     command: npx
#    args:
#      - -y
#      - supergateway
#      - --sse
#      - https://mcp.pipedream.net/df5adf48-d9d4-4566-8e88-e78882be0e11/microsoft_onedrive
#  Funguje
#  spotify:
#    command: npx
#    args:
#      - -y
#      - supergateway
#      - --sse
#      - https://mcp.pipedream.net/df5adf48-d9d4-4566-8e88-e78882be0e11/spotify

  
speech:
  # V√Ωchoz√≠ nastaven√≠ pro u≈æivatele
  speechTab:
    conversationMode: false         # Vypnuto ve v√Ωchoz√≠m stavu
    advancedMode: false
    speechToText:
      engineSTT: "browser"          # Browser je rychlej≈°√≠ pro ƒçe≈°tinu
      languageSTT: "Czech (CZ)"
      autoTranscribeAudio: false    # Vypnuto ve v√Ωchoz√≠m stav
      decibelValue: -45
      autoSendText: 1               # Automatick√© odesl√°n√≠ po kr√°tk√© pauze (kdy≈æ je aktivn√≠)
    textToSpeech:
      engineTTS: "external"
      voice: "nova"                 # V√Ωchoz√≠ hlas Nova
      languageTTS: "cs"
      automaticPlayback: false
      playbackRate: 1.0
      cacheTTS: true
  
  # Speech-to-Text (STT) - Whisper podporuje ƒçe≈°tinu
  stt:
    openai:
      apiKey: "${OPENAI_API_KEY}"
      model: "whisper-1"
  
  # Text-to-Speech (TTS) - OpenAI TTS s Nova jako v√Ωchoz√≠
  tts:
    openai:
      apiKey: "${OPENAI_API_KEY}"
      model: "tts-1"
      voices: ["nova", "alloy", "echo", "fable", "onyx", "shimmer"]  # Nova je prvn√≠ = v√Ωchoz√≠
      
memory:
  disabled: false            # zapnuto (kdy≈æ d√°≈° true, √∫plnƒõ vypne≈° pamƒõ≈•)
  personalize: true          # u≈æivatel√© si mohou v chatu pamƒõ≈• zapnout/vypnout
  tokenLimit: 3000           # strop token≈Ø pro ulo≈æen√≠ a zpracov√°n√≠ pamƒõti
  messageWindowSize: 8       # kolik posledn√≠ch zpr√°v se bere do kontextu pro uƒçen√≠
  
  # üéØ TVOJE skvƒõl√© validKeys (s opraven√Ωmi uvozovkami)
  validKeys:
    - "preferred_name"       # jak tƒõ oslovovat (nap≈ô. ‚ÄûIng. Petr")
    - "role"                 # role/pozice (nap≈ô. ‚Äûenergetick√Ω specialista")  
    - "company"              # n√°zev firmy/brand≈Ø
    - "communication_style"  # styl komunikace (neform√°ln√≠, diakritika, mezery mezi odstavci‚Ä¶)
    - "domains_of_interest"  # odborn√© oblasti (PENB, NZ√ö, R√öIAN, Modbus, atd.)
    - "tools_stack"          # pou≈æ√≠van√© n√°stroje (Podio, Make, Meow AI Engine‚Ä¶)
    - "project_prefs"        # preferovan√© form√°ty v√Ωstup≈Ø (JSON schema, tabulky, Tailwind, atd.)
    - "locales"              # jazyky/locale (cs-CZ, en-US, atd.)
    - "user_preferences"     # obecn√© u≈æivatelsk√© preference 
    - "conversation_context" # d≈Øle≈æit√Ω kontext z konverzac√≠
    - "learned_facts"        # nauƒçen√° fakta a poznatky
    - "personal_information" # z√°kladn√≠ osobn√≠ info (jen explicitn√≠)
    
    # üí° M√â dodateƒçn√© business-oriented kl√≠ƒçe
    - "current_projects"     # aktivn√≠ dlouhodob√© projekty
    - "client_context"       # kontext a po≈æadavky klient≈Ø
    - "workflow_patterns"    # pracovn√≠ postupy a automatizace
  
  agent:
    provider: "openAI"       # nebo "openRouter" / "azureOpenAI" / "anthropic" dle tv√©ho endpointu
    model: "gpt-4o-mini"     # ‚úÖ OPRAVENO: skuteƒçn√Ω model (ne gpt-5-mini)
    toolkits: []
    tools: []
        # üß† Kombinovan√© instrukce - tvoje business logika + moje optimalizace
    instructions: |
      Jsi specializovan√Ω memory agent pro business kontext. Zamƒõ≈ô se na ukl√°d√°n√≠ 
      profesn√≠ch a dlouhodobƒõ relevantn√≠ch informac√≠.
      
      üìä PRIORITN√ç informace k ukl√°d√°n√≠:
      
      preferred_name: Jak u≈æivatele oslovovat (Ing., pan, jm√©no...)
      role: Profesn√≠ pozice, specializace, odpovƒõdnosti
      company: N√°zev firmy, brand≈Ø, organizaƒçn√≠ kontext
      communication_style: 
        - Formalita (form√°ln√≠/neform√°ln√≠)  
        - Jazyk a locale (ƒçe≈°tina, angliƒçtina)
        - Technick√° √∫rove≈à komunikace
        - Preference form√°tov√°n√≠ (mezery, diakritika...)
      
      domains_of_interest: Odborn√© oblasti jako PENB, NZ√ö, R√öIAN, Modbus, IoT...
      tools_stack: Konkr√©tn√≠ n√°stroje - Podio, Make.com, Meow AI Engine, datab√°ze...
      project_prefs: Preferovan√© v√Ωstupy - JSON schema, tabulky, Tailwind, grafy...
      locales: Jazykov√© a region√°ln√≠ nastaven√≠
      
      current_projects: Aktivn√≠ dlouhodob√© projekty (ne jednor√°zov√© √∫koly)
      client_context: D≈Øle≈æit√© info o klientech a jejich po≈æadavc√≠ch
      workflow_patterns: Opakuj√≠c√≠ se procesy a automatizace
      
      user_preferences: Obecn√© preference (zp≈Øsob pr√°ce, UI/UX preference, obl√≠ben√© p≈ô√≠stupy)
      conversation_context: D≈Øle≈æit√Ω kontext a poznatky z p≈ôedchoz√≠ch konverzac√≠
      learned_facts: Novƒõ nauƒçen√° fakta, poznatky, technick√© informace
      personal_information: Z√°kladn√≠ osobn√≠ informace (pouze explicitnƒõ sd√≠len√©)
      
      üéØ UKL√ÅDEJ kdy≈æ u≈æivatel:
      - Se p≈ôedstavuje nebo mƒõn√≠ svou roli
      - Specifikuje komunikaƒçn√≠ preference  
      - Jmenuje n√°stroje a technologie kter√© pou≈æ√≠v√°
      - Definuje po≈æadavky na form√°ty v√Ωstup≈Ø
      - Zm√≠n√≠ dlouhodob√© projekty nebo klienty
      - Popisuje sv√© workflow a procesy
      
      üö´ NEUKL√ÅDEJ:
      - Doƒçasn√© √∫koly a jednor√°zov√© dotazy
      - Denn√≠ aktivity a kr√°tk√© konverzace
      - Osobn√≠ informace mimo profesi
      - Citliv√© √∫daje bez explicitn√≠ho souhlasu
      - Zastaral√© informace (pravidelnƒõ aktualizuj)
      
      üí™ Buƒè proaktivn√≠: Kdy≈æ vid√≠≈° konflikt nebo zastaral√© info, aktualizuj ho.
    
    # ‚öôÔ∏è Optimalizovan√© parametry pro konzistentn√≠ business rozhodov√°n√≠
    model_parameters:
      temperature: 0.2       # Konzistentn√≠, ale ne √∫plnƒõ rigidn√≠
      max_tokens: 1200       # Dostateƒçn√Ω prostor pro detailn√≠ memory
      top_p: 0.9            # Trochu kreativity p≈ôi organizaci informac√≠
